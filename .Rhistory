oc_naics <-  oc_naics %>% # Industries of interest below in LA county
rename(fips = area_fips,
naics = industry_code) %>%
filter(naics %in% c("811192", "315",   # %>%, filter: see if NAICS obsvr r in the vector
"493110", "722513"))
oc_naics <-  oc_naics %>% # Industries of interest below in LA county
rename(fips = area_fips,
naics = industry_code) %>%
filter(naics %in% c("811192", "315",   # %>%, filter: see if NAICS obsvr r in the vector
"493110", "722513"))
lac_naics <- qcewGetAreaData("2023", "a", "06037") %>%
clean_names()     #all industries in LAC
oc_naics <- qcewGetAreaData("2023", "a", "06059") %>%
clean_names()     # all in OC
sb_naics <- qcewGetAreaData("2023", "a", "06071") %>%
clean_names()     # all in SB county
lac_naics2 <-  lac_naics %>% # Industries of interest below in LA county
rename(fips = area_fips,
naics = industry_code) %>%
filter(naics %in% c("811192", "315",   # %>%, filter: see if NAICS obsvr r in the vector
"493110", "722513"))
# NA check below, can ignore
#lapply(lac_naics2, function(x) sum(is.na(x))) # 0 NA's as expected? yes
#print(names(lac_naics))
lac_naics2 <- lac_naics2[-c(2, 4:5,
7:8, 16, 24)]  #removing non-interest vars
assign_industry_fun <- function(naics, taxable_annual_wages) {
industry <- case_when(
naics == 493110 & taxable_annual_wages == 0 ~ "Warehouse & Storage (public)",  # More specific condition first
naics == 493110 ~ "Warehouse & Storage",  # General condition second
naics == 722513 ~ "Fast Food",
naics == 811192 ~ "Car Wash",
naics == 315 ~ "Apparel Mfg.",
TRUE ~ NA_character_
)
return(industry)
}
#Applying Function
lac_naics2 <- lac_naics2 %>%
mutate(industry =
(assign_industry_fun(naics, taxable_annual_wages))) %>% # apply mutate to industry col bcus casewhen
select(1:2, industry, everything())             # function only applies to vectorized lists not entire df
#str(lac_naics2)
#troubleshootign function -- it works
#lac_naics2 %>%
#filter(naics == 493110) %>% #filter for warehouse
#select(industry, naics, taxable_annual_wages)
oc_naics <-  oc_naics %>% # Industries of interest below in LA county
rename(fips = area_fips,
naics = industry_code) %>%
filter(naics %in% c("811192", "315",   # %>%, filter: see if NAICS obsvr r in the vector
"493110", "722513"))
oc_naics <- oc_naics[-c(2, 4:5, 7:8, 16, 24)] %>%
mutate(industry =
(assign_industry_fun(naics, taxable_annual_wages))) %>%
select(1:2, industry, everything())
sb_naics <- sb_naics %>%
rename(fips = area_fips,
naics = industry_code) %>%
filter(naics %in% c("811192", "315",   # %>%, filter: see if NAICS obsvr r in the vector
"493110", "722513"))
sb_naics <- sb_naics[-c(2, 4:5, 7:8, 16, 24)] %>%
mutate(industry =
(assign_industry_fun(naics, taxable_annual_wages))) %>%
select(1:2, industry, everything())
sb_naics <- sb_naics[-1, ] #remove unwanted row of public fast food establishment
oc_naics <-  oc_naics %>% # Industries of interest below in LA county
rename(fips = area_fips,
naics = industry_code) %>%
filter(naics %in% c("811192", "315",   # %>%, filter: see if NAICS obsvr r in the vector
"493110", "722513"))
#add county identifier
lac_naics2$county <- "Los Angeles County"
oc_naics$county <- "Orange County"
sb_naics$county <- "San Bernardino County"
#BIND ROW
industries <- bind_rows(lac_naics2, oc_naics, sb_naics) %>%
select(1, county, everything())
industries <- industries[-c(1,6,11), ] #success: removed warehouse public
#print(names(industries))
industries <- industries
#DESCRIPTIVE STATS
p <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = county))
p1 <- p + geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)",
y = "Annual Average Establishments",
x = "Industry",
caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p1 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
# p1 + theme_fivethirtyeight()
#By industry, faceted into three counties
p2 <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = industry)) +
geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by
County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p2 #not good? no real county info (base layer)
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) #good but too crowded right now
# annual_avg_emplvl
# preview the different warehouse employment for warehouses across counties
p3 + theme(axis.text.x = "45
")
p3 + theme(axis.text.x = "45")
p3 + theme(axis.text.x = element_text(angle = 20, hjust = 0))
p3 + theme(axis.text.x = element_text(angle = 0, hjust = 0))
p3 + theme(axis.text.x = element_text(angle = 15, hjust = 0))
p3 + theme(axis.text.x = element_text(angle = 360, hjust = 0))
p3 + theme(axis.text.x = element_text(angle = 365, hjust = 0))
p3 + theme(axis.text.x = element_text(angle = -400, hjust = 0))
p3 + theme(axis.text.x = element_text(angle -370, hjust = 0))
p3 + theme(axis.text.x = element_text(angle -400, hjust = 0))
p3 + theme(axis.text.x = element_text(angle = -400, hjust = 0))
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
theme(axis.text.x = element_text(angle = 25, hjust = 1)) + ylim(500)
theme(axis.text.x = element_text(angle = 25, hjust = 1)) + ylim(NA, 500)
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ ylim(NA, 500)
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ ylim(0, 500)#this literllly removes fastfood column bcus not in the NA - 500 range
knitr::include_graphics(c("images/socalcoshlogo.jpg", "images/uclalosh.png"))
#![](images/socalcoshlogo.jpg){fig-align="left" width="233"}
knitr::include_graphics(c("images/socalcoshlogo.jpg", "images/uclalosh.png"))
#![](images/socalcoshlogo.jpg){fig-align="left" width="233"}
::: {#fig-group layout-ncol="2"}
![](images/uclalosh.png){width="50%"}
![](images/uclalosh.jpg){fig-align="right"}
![](images/socalcoshlogo.jpg){width=300}
!(images/socalcoshlogo.jpg){width=300}
(images/socalcoshlogo.jpg){width=300}
![](images/uclalosh.jpg){width=300}
![](images/uclalosh.jpg){width=200}
View(lac_naics2)
View(lac_naics2)
knitr::opts_chunk$set(echo = FALSE)
library(readr)
#install.packages("patchwork")
library(patchwork)
library(kableExtra)
library(ggthemes)
library(readxl)
library(janitor)
library(tidyverse)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stargazer)
library(caret)
library(car)
#install.packages("sf")
library(sf)
library(usmap)
library(RColorBrewer)
library(maps)
library(mapdata)
library(leaflet)
library(lubridate)
library(choroplethr)
#install.packages("countyweather")  #not available for this R version
#install.packages("rnoaa")
library(sp)
library(spatial)
library(devtools)
#install.packages("osmdata")
library(mapview)
library(osmdata)
#install.packages("httr")
library(httr)
library(leaflet)
p4 <- ggplot(data = industries, aes(x = industry, y = annnual_avg_wkly_wage, fill = county))
p4 <- p + geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)",
y = "Average Weekly Wages",
x = "Industry",
caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p3
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(xlim = 0,750)#this literllly removes fastfood column bcus not in the NA - 500 range - use coord cartesian?
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = 0,750)#this literllly removes fastfood column bcus not in the NA - 500 range - use coord cartesian?
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))#this literllly removes fastfood column bcus not in the NA - 500 range - use coord cartesian?
p4 <- ggplot(data = industries_filter, aes(x = industry, y = annnual_avg_wkly_wage, fill = county))
p4 <- p + geom_bar(stat = "identity", position = "dodge") + labs(title = "Average wages in San Bernardino(2023)",
y = "Average Weekly Wages",
x = "Industry",
caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p4 <- ggplot(data = industries_filter, aes(x = industry, y = annnual_avg_wkly_wage))
p4 <- p + geom_bar(stat = "identity", position = "dodge") + labs(title = "Average wages in San Bernardino(2023)",
y = "Average Weekly Wages",
x = "Industry",
caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p4 <- ggplot(data = industries_filter, aes(x = industry, y = annnual_avg_wkly_wage))
p4 <- p + geom_bar(stat = "identity", position = "dodge") + labs(title = "Average wages in San Bernardino(2023)",
y = "Average Weekly Wages",
x = "Industry",
caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p4 <- ggplot(data = industries_filter, aes(x = industry, y = annnual_avg_wkly_wage, fill = industry))
p4 <- p + geom_bar(stat = "identity", position = "dodge") + labs(title = "Average wages in San Bernardino(2023)",
y = "Average Weekly Wages",
x = "Industry",
caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
View(industries_filter)
View(industries_filter)
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))#this literllly removes fastfood column bcus not in the NA - 500 range - use coord cartesian?
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
p0 <- ggplot(mtcars, aes(disp, wt)) +
geom_point() +
geom_smooth()
p0
# Setting the limits on a scale converts all values outside the range to NA.
p0 + scale_x_continuous(limits = c(325, 500))
p1,p2,p3,p4
p1
p2
p3
p4
p1 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))
p4 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
p1 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))
p4
p1 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
p3 + coord_cartesian(ylim = c(0,750))
p4
#By industry, faceted into three counties
p2 <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = industry)) +
geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p2 #not good? no real county info (base layer)
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) #good but too crowded right now
# annual_avg_emplvl
# preview the different warehouse employment for warehouses across counties
p1 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1))
p3 + coord_cartesian(ylim = c(0,750))
p4
View(lac_naics)
View(lac_naics2)
#By industry, faceted into three counties
p2 <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = industry)) +
geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p2 #not good? no real county info (base layer)
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) #good but too crowded right now
# annual_avg_emplvl
# preview the different warehouse employment for warehouses across counties
p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) #good but too crowded right now
# annual_avg_emplvl
# preview the different warehouse employment for warehouses across counties
#By industry, faceted into three counties
p2 <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = industry)) +
geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p2 #not good? no real county info (base layer)
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", wdith = "0.5") + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", width = "0.5") + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", width = 0.5) + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", width = 0.5, position = "dodge") + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme(axis.text.x = element_text(angle = -370, hjust = 0))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p4 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_wkly_wage, fill = industry)) + geom_bar(stat = "identity", width = 0.5) + labs(title = "Average Weekly Wages in San Bernardino County (2023)", y = "Average Weekly wages", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p4 + theme_linedraw() + theme(axis.text.x = element_text(angle = -370, hjust = 0))
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge") + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme_linedraw() +theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge", width = 0.5) + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
industries_filter <- industries %>%
filter(county == "San Bernardino County")
p3 <- ggplot(data = industries_filter, aes(x = industry,y = annual_avg_estabs, fill = industry)) + geom_bar(stat = "identity", position = "dodge", width = 0.5) + labs(title = "Industry Total in San Bernardino County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p3 + theme_linedraw() +theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))
#install.packages("patchwork")
library(patchwork)
knitr::opts_chunk$set(echo = FALSE)
library(readr)
#install.packages("patchwork")
library(patchwork)
library(kableExtra)
library(ggthemes)
library(readxl)
library(janitor)
library(tidyverse)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stargazer)
library(caret)
library(car)
#install.packages("sf")
library(sf)
library(usmap)
library(RColorBrewer)
library(maps)
library(mapdata)
library(leaflet)
library(lubridate)
library(choroplethr)
#install.packages("countyweather")  #not available for this R version
#install.packages("rnoaa")
library(sp)
library(spatial)
library(devtools)
#install.packages("osmdata")
library(mapview)
library(osmdata)
#install.packages("httr")
library(httr)
p4 <- p4 + theme_linedraw() + theme(axis.text.x = element_text(angle = -370, hjust = 0))
p3 <- p3 + theme_linedraw() +theme(axis.text.x = element_text(angle = -370, hjust = 0))+ coord_cartesian(ylim = c(0,750))
p2 <- p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) #good but too crowded right now
p1 <- p1 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
p1 + p2 + p3 +p4
grid.arrange(p1, p2, p3, p4, nrow = 2)
install.packages("gridExtra")
install.packages("gridExtra")
library(gridExtra)
knitr::opts_chunk$set(echo = FALSE)
library(readr)
#install.packages("patchwork")
library(patchwork)
library(kableExtra)
library(ggthemes)
library(readxl)
library(janitor)
library(tidyverse)
library(tidyr)
library(dplyr)
library(ggplot2)
library(stargazer)
library(gridExtra)
library(caret)
library(car)
#install.packages("sf")
library(sf)
library(usmap)
library(RColorBrewer)
library(maps)
library(mapdata)
library(leaflet)
library(lubridate)
library(choroplethr)
#install.packages("countyweather")  #not available for this R version
#install.packages("rnoaa")
library(sp)
library(spatial)
library(devtools)
#install.packages("osmdata")
library(mapview)
library(osmdata)
#install.packages("httr")
library(httr)
grid.arrange(p1, p2, p3, p4, nrow = 2)
grid.arrange(p1, p2, nrow = 1)
grid.arrange(p1, p2, ncol = 2)
grid.arrange(p1, p2, nrow = 2)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"', caption = "QCEW 2023") %>%
kable_styling("striped", full_width = F)
(p1 + p2 ) + plot_layout(widths = c(1, 1))
(p1 + p2 ) + plot_layout(widths = c(2, 2))
(p1 + p2 ) + plot_layout(widths = c(5, 5))
#DESCRIPTIVE STATS
p <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = county))
p1 <- p + geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)",
y = "Annual Average Establishments",
x = "Industry",
caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p1 <- p1 + theme_linedraw() + theme(axis.text.x = element_text(angle = 15, hjust = 1))
# p1 + theme_fivethirtyeight()
#By industry, faceted into three counties
p2 <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = industry)) +
geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p2 #not good? no real county info (base layer)
#By industry, faceted into three counties
p2 <- ggplot(data = industries, aes(x = industry, y = annual_avg_estabs, fill = industry)) +
geom_bar(stat = "identity", position = "dodge") + labs(title = "Total Industry Establishments by County (2023)", y = "Annual Average Establishments", x = "Industry", caption = "Source: Buruea of Labor Statistics Quarterly Census on Employment and Wages" )
p2 #not good? no real county info (base layer)
p2 <- p2 + theme_linedraw()+ facet_wrap(~ county) + theme(axis.text.x = element_text(angle = 25, hjust = 1)) #good but too crowded right now
# annual_avg_emplvl
# preview the different warehouse employment for warehouses across counties
p2
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"', caption = "QCEW 2023") %>%
kable_styling(full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"', caption = "QCEW 2023") %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"', caption = "QCEW 2023") %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = F,
position = "float_right")
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F) %>%
scroll_box(width = "600px", height = "300px" )
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "600px", height = "300px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "600px", height = "300px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "70%", height = "500px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "90%", height = "500px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "90%", height = "5450px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "90%", height = "5450px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = T)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "90%", height = "5450px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "90%", height = "400px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "90%", height = "400px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
#sample NAICS df, To do: download LA and OC and include all of them in this df preview
industries %>%
kbl(table.attr = 'data-quarto-disable-processing="true"',
caption = "QCEW 2023") %>%
scroll_box(width = "90%", height = "400px" ) %>%
kable_styling(bootstrap_options = c("striped", "condensed"),
full_width = F)
p1
p2
p1 + p2
print(names(industries))
