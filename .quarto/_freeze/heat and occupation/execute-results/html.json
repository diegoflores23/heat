{
  "hash": "51098e557c00a58445f8ee1cb3d9c568",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Heat and Occupation in heatlabor project directory\"\nauthor: \"Diego Flores\"\ndate: \"8/16/2024\"\noutput: html_document\n---\n\n\n\n\n\n\n\nConsider using a leaflet map, connects to google API, zooming sp - more traditional gis work\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install_github(\"mikeasilva/blsAPI\") #success \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# qcewGetIndustryData <- function (year, qtr, industry)\n  \nqcewGetIndustryData <- function (year, qtr, industry) {\n\turl <- \"http://data.bls.gov/cew/data/api/YEAR/QTR/industry/INDUSTRY.csv\"\n\turl <- sub(\"YEAR\", year, url, ignore.case=FALSE)\n\turl <- sub(\"QTR\", tolower(qtr), url, ignore.case=FALSE)\n\turl <- sub(\"INDUSTRY\", industry, url, ignore.case=FALSE)\n\tread.csv(url, header = TRUE, sep = \",\", quote=\"\\\"\", dec=\".\", na.strings=\" \", skip=0)\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nffood <- qcewGetIndustryData(\"2023\", \"a\", \"722513\")\nstr(ffood)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'data.frame':\t3633 obs. of  38 variables:\n $ area_fips                       : chr  \"01000\" \"01000\" \"01001\" \"01003\" ...\n $ own_code                        : int  2 5 5 5 5 5 5 5 5 5 ...\n $ industry_code                   : int  722513 722513 722513 722513 722513 722513 722513 722513 722513 722513 ...\n $ agglvl_code                     : int  58 58 78 78 78 78 78 78 78 78 ...\n $ size_code                       : int  0 0 0 0 0 0 0 0 0 0 ...\n $ year                            : int  2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 ...\n $ qtr                             : chr  \"A\" \"A\" \"A\" \"A\" ...\n $ disclosure_code                 : chr  \"\" \"\" \"\" \"\" ...\n $ annual_avg_estabs               : int  1 4688 36 218 28 9 30 3 20 114 ...\n $ annual_avg_emplvl               : int  0 82373 857 3348 513 163 537 70 363 2352 ...\n $ total_annual_wages              : num  0.00 1.62e+09 1.68e+07 7.26e+07 8.42e+06 ...\n $ taxable_annual_wages            : num  0.00 8.06e+08 8.46e+06 3.55e+07 5.00e+06 ...\n $ annual_contributions            : int  0 4017812 29196 199965 40013 6079 15380 2806 12208 83347 ...\n $ annual_avg_wkly_wage            : int  0 379 377 417 316 288 338 228 314 362 ...\n $ avg_annual_pay                  : int  0 19700 19598 21683 16424 14976 17589 11875 16351 18810 ...\n $ lq_disclosure_code              : chr  \"N\" \"\" \"\" \"\" ...\n $ lq_annual_avg_estabs            : num  37.92 1.35 1.51 1.18 2.13 ...\n $ lq_annual_avg_emplvl            : num  0 1.32 2.4 1.34 2.21 1.13 2.02 0.85 1.74 1.79 ...\n $ lq_total_annual_wages           : num  0 1.39 3.03 1.92 2.67 1.05 2.6 0.67 2.09 2.17 ...\n $ lq_taxable_annual_wages         : num  0 1.64 3.37 1.71 2.77 1.29 2.65 0.87 1.89 2.48 ...\n $ lq_annual_contributions         : num  0 1.71 2.17 2.1 4.6 1.09 2.11 0.54 1.12 1.94 ...\n $ lq_annual_avg_wkly_wage         : num  0 1.06 1.26 1.42 1.21 0.94 1.29 0.79 1.2 1.21 ...\n $ lq_avg_annual_pay               : num  0 1.06 1.26 1.42 1.21 0.94 1.29 0.79 1.2 1.21 ...\n $ oty_disclosure_code             : chr  \"\" \"\" \"\" \"\" ...\n $ oty_annual_avg_estabs_chg       : int  0 120 -1 12 4 0 0 -1 -2 -2 ...\n $ oty_annual_avg_estabs_pct_chg   : num  0 2.6 -2.7 5.8 16.7 0 0 -25 -9.1 -1.7 ...\n $ oty_annual_avg_emplvl_chg       : int  0 3495 38 209 92 21 22 4 -10 7 ...\n $ oty_annual_avg_emplvl_pct_chg   : num  0 4.4 4.6 6.7 21.9 14.8 4.3 6.1 -2.7 0.3 ...\n $ oty_total_annual_wages_chg      : num  0.00 1.30e+08 1.79e+06 4.96e+06 1.55e+06 ...\n $ oty_total_annual_wages_pct_chg  : num  0 8.7 11.9 7.3 22.6 17.7 10.2 6.4 3.7 5 ...\n $ oty_taxable_annual_wages_chg    : num  0 41123637 423393 2409947 1123385 ...\n $ oty_taxable_annual_wages_pct_chg: num  0 5.4 5.3 7.3 29 8.9 4.9 5.5 1.5 1.7 ...\n $ oty_annual_contributions_chg    : int  0 -3722932 -40765 -154937 -8544 -5704 -22076 -3674 -20713 -130407 ...\n $ oty_annual_contributions_pct_chg: num  0 -48.1 -58.3 -43.7 -17.6 -48.4 -58.9 -56.7 -62.9 -61 ...\n $ oty_annual_avg_wkly_wage_chg    : int  0 15 25 3 2 7 18 0 19 16 ...\n $ oty_annual_avg_wkly_wage_pct_chg: num  0 4.1 7.1 0.7 0.6 2.5 5.6 0 6.4 4.6 ...\n $ oty_avg_annual_pay_chg          : int  0 773 1280 136 118 369 949 40 990 843 ...\n $ oty_avg_annual_pay_pct_chg      : num  0 4.1 7 0.6 0.7 2.5 5.7 0.3 6.4 4.7 ...\n```\n\n\n:::\n\n```{.r .cell-code}\nlac_ff <- ffood %>% \n  rename(fips = area_fips) %>% \n  filter(fips == \"06037\")\n  \ncarwash <- qcewGetIndustryData(\"2023\", \"a\", \"811192\")\nlac_carwash <- carwash %>% \n  rename(fips = area_fips) %>% \n  filter(fips == \"811192\")\n```\n:::\n\n\n\n\n\nArea notes:\n06037\tLos Angeles County, California \n06059\tOrange County, California\n06071\tSan Bernardino County, California\nOperating warehousing and storage facilities and providing related \nlogistics services--are classified in Industry Group 4931, Warehousing and Storage.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqcewGetAreaData <- function(year, qtr, area) {\n\turl <- \"http://data.bls.gov/cew/data/api/YEAR/QTR/area/AREA.csv\"\n\turl <- sub(\"YEAR\", year, url, ignore.case=FALSE)\n\turl <- sub(\"QTR\", tolower(qtr), url, ignore.case=FALSE)\n\turl <- sub(\"AREA\", toupper(area), url, ignore.case=FALSE)\n\tread.csv(url, header = TRUE, sep = \",\", quote=\"\\\"\", dec=\".\", na.strings=\" \", skip=0)\n}\n```\n:::\n\n\n\n\nCODEBOOK notes\nown_code - 3 = public ownership \nannual_avg_estabs\t= Annual average of quarterly establishment counts for a given year\ntotal_annual_wages =\tSum of the four quarterly total wage levels for a given year\nannual_contributions\t=\tSum of the four quarterly contribution totals for a given year\nannual_avg_wkly_wage\t= Avg weekly wage based on 12-monthly employment levels and annual wage levels.\navg_annual_pay\t=\tAverage annual pay\nlocation quotient \nover the year change \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlac_naics <- qcewGetAreaData(\"2023\", \"a\", \"06037\") %>% #all industries in LAC \n  clean_names()\n\nlac_naics2 <-  lac_naics %>% # Industries of interest below in LA county\n  rename(fips = area_fips, \n         naics = industry_code) %>% \n  filter(naics %in% c(\"811192\", \"315\", \n                      \"493110\", \"722513\")) #filter to see if NAICS obsvr are in the vector\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#sample NAICS \nlac_naics2 <- lac_naics2[-c(2, 4:5, 7:8, 13, 16:26, 31:38)] \n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}